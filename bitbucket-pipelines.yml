image: python:3.7.3

pipelines:
  branches:
    development:
      - step:
          caches:
            - pip
          script:
            - pip install pipenv --upgrade
            - pipenv install --deploy --system
            # - tox test # skipping for now. No real tests to run
    master:
      - step:
          script:
          - pipe: atlassian/pypi-publish:0.2.7
            variables:
             PYPI_USERNAME: $PYPI_PRIVATE_USER
             PYPI_PASSWORD: $PYPI_PRIVATE_PASS
